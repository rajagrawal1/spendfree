/* Dark & Light themes with CSS variables */
:root{
  --primary:#0090e7; --danger:#ef4444; --ring:rgba(0,144,231,.35);
  --radius:16px; --shadow:0 6px 16px rgba(0,0,0,.10);
  --blue:#3b82f6; --red:#ef4444; --yellow:#f59e0b; --green:#22c55e;
}
html[data-theme="dark"]{
  --bg:#0e1013; --surface:#151920; --text:#e5e7eb; --muted:#9aa3b2; --border:#1f2430; --header:#0b0d10; --thead:#11161f;
}
html[data-theme="light"]{
  --bg:#f7f8fa; --surface:#ffffff; --text:#0f141a; --muted:#55606f; --border:#e5e7eb; --header:#ffffff; --thead:#f0f3f7;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font:500 15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
h1,h2,h3{margin:0 0 .5rem 0}
h2{font-size:1.1rem}
.small{font-size:.9rem}
.muted{color:var(--muted)}
.app-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border);background:var(--header);position:sticky;top:0;z-index:10}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:36px;height:36px;border-radius:12px;background:var(--primary);display:grid;place-items:center;color:white;font-weight:800;box-shadow:var(--shadow)}
.tabs{display:flex;gap:8px;flex-wrap:wrap;padding:8px 12px;border-bottom:1px solid var(--border);background:var(--header);position:sticky;top:58px;z-index:9}
.tab{appearance:none;border:0;background:transparent;color:var(--muted);padding:10px 16px;border-radius:12px;cursor:pointer;font-weight:500;letter-spacing:0.02em;position:relative;transition:all 0.2s ease;min-height:44px;display:flex;align-items:center;justify-content:center}
.tab:hover{background:#00000014;color:var(--text);transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,0.15)}
.tab.active{color:var(--text);background:#00000014;box-shadow:inset 0 0 0 2px var(--primary);font-weight:600}
main{padding:16px;max-width:1100px;margin:0 auto}
.view{display:none}
.view.active{display:block}
.grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
.grid-2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
@media (max-width:800px){.grid,.grid-2{grid-template-columns:1fr}}
.card{background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px}
.card-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.kpi{display:flex;flex-direction:column;gap:6px}
.kpi.safe .kpi-value{color:#23d18b}
.kpi-label{font-size:.85rem;color:var(--muted)}
.kpi-value{font-size:1.6rem;font-weight:700;letter-spacing:.2px}
.kpi-sub{display:flex;justify-content:space-between;color:var(--muted);font-size:.85rem}
.chart-card{margin-top:12px}
.table-wrap{overflow:auto;border-radius:12px;border:1px solid var(--border)}
.table{width:100%;border-collapse:separate;border-spacing:0}
.table th,.table td{padding:10px 12px;border-bottom:1px solid var(--border);white-space:nowrap}
.table th{position:sticky;top:0;background:var(--thead);color:var(--muted);text-transform:uppercase;font-size:.75rem;letter-spacing:.04em}
.table tr:hover td{background:#00000008}
.table .num{text-align:right;font-variant-numeric:tabular-nums}
input,select,button,textarea{border-radius:12px;border:1px solid var(--border);background:transparent;color:var(--text);padding:10px 12px;outline:none}
textarea{min-height:68px}
input:focus,select:focus,button:focus,textarea:focus{box-shadow:0 0 0 3px var(--ring);border-color:var(--primary)}
.btn{background:#00000008}
.btn.primary{background:var(--primary);color:white;border:0}
.btn.ghost{background:#00000008;color:var(--text);border:0;cursor:pointer;transition:all 0.2s ease;position:relative;overflow:hidden}
.btn.ghost:hover{background:#00000014;transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,0.15)}
.btn.ghost:active{transform:translateY(0);box-shadow:0 2px 4px rgba(0,0,0,0.1)}
.btn.danger{background:#b91c1c;color:white;border:0}
.file{display:inline-block}
.attach{align-items:center}
.attach .btn{display:inline-flex;gap:6px;align-items:center;min-height:44px;min-width:120px;justify-content:center;font-weight:500;letter-spacing:0.02em;border-radius:12px;padding:10px 16px;position:relative;overflow:hidden}
.attach .btn::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,transparent,rgba(255,255,255,0.1),transparent);transform:translateX(-100%);transition:transform 0.6s}
.attach .btn:hover::before{transform:translateX(100%)}
.attach-list{list-style:none;margin:6px 0 0 0;padding:0;display:flex;gap:8px;flex-wrap:wrap}
.attach-list li{padding:4px 8px;background:#00000008;border:1px solid var(--border);border-radius:999px}
.stack{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.app-footer{padding:12px 16px;color:var(--muted)}
.one-time-only{display:none}
/* Modal */
dialog{border:0;border-radius:16px;padding:0;background:transparent}
.modal-card{background:var(--surface);border-radius:16px;box-shadow:var(--shadow);padding:16px;min-width:300px;max-width:650px}
.modal-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:12px}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#00000008;color:var(--muted);font-size:.75rem}
.docs-list{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.docs-list a{padding:4px 8px;border:1px solid var(--border);border-radius:999px;text-decoration:none;color:var(--text);background:#00000008}
.docs-item{margin-bottom:4px}
.doc-remove{padding:2px 6px;font-size:0.8rem;line-height:1;min-width:20px;height:20px;display:flex;align-items:center;justify-content:center}
.doc-remove:hover{background:#ef4444;color:white}

.chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;background:#00000008;border:1px solid var(--border);border-radius:999px}
.chip-close{appearance:none;border:0;background:transparent;color:var(--muted);cursor:pointer;padding:0 4px;line-height:1}
.chip-close:hover{color:var(--text)}

/* View modal contrast fix */
#modal .modal-card { 
  /* force readable text color for dark/light themes */
  color: var(--text);
}

/* labels vs values in the 2-column grid the View modal uses */
#modal .grid-2 > *:nth-child(2n-1) { color: var(--muted); } /* labels (left column) */
#modal .grid-2 > *:nth-child(2n)   { color: var(--text);  } /* values (right column) */

/* ensure any "muted" chips/labels stay muted even after the overrides above */
#modal .muted { color: var(--muted); }
